apiVersion: v1
kind: Pod
metadata:
  name: shell-demo-1
spec:
  volumes:
  - name: test-volume
    hostPath:
      path: /home/alin/sandbox/test
      type: Directory
  containers:
      - name: busybox
        image: busybox:latest
        stdin: true
        stdinOnce: true
        tty: true
        command: [ "sh", "-c", "--" ]
        args: [ "while true; do sleep 30; done;" ]
        resources:
          limits:
            memory: "128Mi"
            cpu: "500m"
        volumeMounts:
          - mountPath: /test
            name: test-volume
  affinity:
    nodeAffinity:
      preferredDuringSchedulingIgnoredDuringExecution:
      - weight: 50
        preference:
          matchExpressions:
          - key: zone
            operator: In
            values:
            - edge1 
  topologySpreadConstraints:
  - maxSkew: 1
    topologyKey: zone
    whenUnsatisfiable: DoNotSchedule
    labelSelector:
      matchLabels:
        app: step